{% extends "base.html" %}

{% block titulo %} Pedido {% endblock %}

{% block extrastyle %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'stylePedido.css' %}">
{% endblock %}

{% block contenido %}
    <ul id="lista" class="menu">
        <li class="menu-item" onclick="toggleSubMenu('pizza')">Pizza
            <div id="pizza-container" class="submenu-container">
                <ul id="pizza" class="submenu">
                    {% for pizza in lista_pizzas %}
                        <li>
                            <label>
                                <input type="checkbox" name="pizza_checkbox" value="{{ pizza.nombre }}">
                                {{ pizza.nombre }}
                            </label>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </li>

        <li class="menu-item" onclick="toggleSubMenu('pizzaGusto')">Pizza a tu gusto
            <div id="pizzaGusto-container" class="submenu-container">
                <ul id="pizzaGusto" class="submenu">
                    <br><h4>Masas</h4><br>
                    <ul>
                        {% for masa in lista_masas %}
                        <li>
                            <label>
                                <input type="checkbox" name="pizzaGusto_checkbox" value="{{ masa.id }}">
                                {{ masa.nombre }}
                            </label>
                        </li>
                    {% endfor %}
                    </ul>
                    <br><h4>Ingredientes</h4><br>
                    <ul>
                        {% for ingrediente in lista_ingredientes %}
                        <li>
                            <label>
                                <input type="checkbox" name="pizzaGusto_checkbox" value="{{ ingrediente.id }}">
                                {{ ingrediente.nombre }}
                            </label>
                        </li>
                    {% endfor %}
                    </ul>
                </ul>
            </div>
        </li>

        <li class="menu-item" onclick="toggleSubMenu('entrantes')">Entrantes
            <div id="entrantes-container" class="submenu-container">
                <ul id="entrantes" class="submenu">
                    {% for entrante in lista_entrantes %}
                        <li>
                            <label>
                                <input type="checkbox" name="entrantes_checkbox" value="{{ entrante.nombre }}">
                                {{ entrante.nombre }}
                            </label>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </li>

        <li id="bebidas" class="menu-item" onclick="toggleSubMenu('bebidas')">Bebidas
            <div id="bebidas-container" class="submenu-container">
                <ul id="bebidas" class="submenu">
                    {% for bebida in lista_bebidas %}
                        <li>
                            <label>
                                <input type="checkbox" name="bebidas_checkbox" value="{{ bebida.nombre }}">
                                {{ bebida.nombre }}
                            </label>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </li>
    </ul>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
            function toggleSubMenu(submenuId) {
                const currentSubmenu = $(`#${submenuId}-container`);

                if (currentSubmenu) {
                    const isActive = currentSubmenu.hasClass('active');

                    // Oculta todos los submenús excepto el actual y los elementos de casillas de verificación
                    $('.submenu-container').not(currentSubmenu).slideUp().removeClass('active');

                    // Muestra u oculta el submenú actual
                    if (!isActive) {
                        currentSubmenu.slideDown().addClass('active');
                    } else {
                        currentSubmenu.slideUp().removeClass('active');
                    }
                }
            }

            // Agrega un evento al hacer clic en cualquier parte del documento para ocultar los submenús
            $(document).on('click', function(event) {
                if (!$(event.target).closest('.menu-item, :checkbox').length) {
                    $('.submenu-container').slideUp().removeClass('active');
                }
            });
    </script>
    
{% endblock %}
